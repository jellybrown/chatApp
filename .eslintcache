[{"/Users/kimyujin/Documents/react_first/react-chat-app/src/reportWebVitals.js":"1","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/RegisterPage/registerPage.jsx":"2","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/chatPage.jsx":"3","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/LoginPage/loginPage.jsx":"4","/Users/kimyujin/Documents/react_first/react-chat-app/src/index.js":"5","/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/reducers/index.js":"6","/Users/kimyujin/Documents/react_first/react-chat-app/src/App.js":"7","/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/actions/type.js":"8","/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/reducers/user_reducer.js":"9","/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/actions/user_action.js":"10","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/sidePanel.jsx":"11","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/MainPanel/mainPanel.jsx":"12","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/chatRooms.jsx":"13","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/directMessage.jsx":"14","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/favorited.jsx":"15","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/userPanel.jsx":"16","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/MainPanel/messageForm.jsx":"17","/Users/kimyujin/Documents/react_first/react-chat-app/src/firebase.js":"18","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/MainPanel/messageHeader.jsx":"19","/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/reducers/chatRoom_reducer.js":"20","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/MainPanel/message.jsx":"21","/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/actions/chatRoom_action.js":"22"},{"size":362,"mtime":1606797394999,"results":"23","hashOfConfig":"24"},{"size":3186,"mtime":1606893631816,"results":"25","hashOfConfig":"24"},{"size":830,"mtime":1607574874964,"results":"26","hashOfConfig":"24"},{"size":1806,"mtime":1606894829706,"results":"27","hashOfConfig":"24"},{"size":1172,"mtime":1606822291438,"results":"28","hashOfConfig":"24"},{"size":211,"mtime":1606986760347,"results":"29","hashOfConfig":"24"},{"size":1187,"mtime":1607058758170,"results":"30","hashOfConfig":"24"},{"size":290,"mtime":1607664124548,"results":"31","hashOfConfig":"24"},{"size":666,"mtime":1607058758214,"results":"32","hashOfConfig":"24"},{"size":337,"mtime":1606900008060,"results":"33","hashOfConfig":"24"},{"size":518,"mtime":1606831684169,"results":"34","hashOfConfig":"24"},{"size":3309,"mtime":1607664352595,"results":"35","hashOfConfig":"24"},{"size":7973,"mtime":1607500587123,"results":"36","hashOfConfig":"24"},{"size":2903,"mtime":1607840638909,"results":"37","hashOfConfig":"24"},{"size":2954,"mtime":1607660478440,"results":"38","hashOfConfig":"24"},{"size":2724,"mtime":1606916178189,"results":"39","hashOfConfig":"24"},{"size":4806,"mtime":1607488954174,"results":"40","hashOfConfig":"24"},{"size":753,"mtime":1606807971366,"results":"41","hashOfConfig":"24"},{"size":5810,"mtime":1607841052846,"results":"42","hashOfConfig":"24"},{"size":619,"mtime":1607664327935,"results":"43","hashOfConfig":"24"},{"size":1351,"mtime":1607576021939,"results":"44","hashOfConfig":"24"},{"size":436,"mtime":1607664135488,"results":"45","hashOfConfig":"24"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},"jinhow",{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"51"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"51"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"83"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"86","usedDeprecatedRules":"51"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"89","messages":"90","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/kimyujin/Documents/react_first/react-chat-app/src/reportWebVitals.js",[],["97","98"],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/RegisterPage/registerPage.jsx",[],["99","100"],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/chatPage.jsx",[],["101","102"],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/LoginPage/loginPage.jsx",[],["103","104"],"/Users/kimyujin/Documents/react_first/react-chat-app/src/index.js",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/reducers/index.js",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/App.js",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/actions/type.js",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/reducers/user_reducer.js",[],["105","106"],"/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/actions/user_action.js",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/sidePanel.jsx",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/MainPanel/mainPanel.jsx",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/chatRooms.jsx",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/directMessage.jsx",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/favorited.jsx",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/userPanel.jsx",[],["107","108"],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/MainPanel/messageForm.jsx",["109"],"import React, { useRef } from 'react';\nimport Form from 'react-bootstrap/Form';\nimport ProgressBar from 'react-bootstrap/ProgressBar';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport './mainStyles.css';\nimport { useState } from 'react';\nimport firebase from '../../../firebase';\nimport {useSelector} from 'react-redux';\nimport mime from 'mime-types';\n\nconst MessageForm = () => {\n    const [text, setText] = useState('');\n    const [errors, setErrors] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [percentage, setPercentage] = useState(0);\n\n    const chatRoom = useSelector(state => state.chatRoom.currentChatRoom);\n    const user = useSelector(state => state.user.currentUser);\n    const isPrivateRoom = useSelector(state => state.chatRoom.isPrivateRoom);\n    const imageRef = useRef();\n    const storageRef = firebase.storage().ref();\n\n    const onChange = (e) => {\n        setText(e.target.value);\n    };\n\n    const createMessage = (fileUrl = null) =>  {\n        const message = {\n            timestamp: firebase.database.ServerValue.TIMESTAMP,\n            user: {\n                id: user.uid,\n                name: user.displayName,\n                image: user.photoURL\n            }\n        };\n\n        if(fileUrl !== null) {\n            message[\"image\"] = fileUrl;\n        } else {\n            message[\"content\"] = text;\n        }\n        return message;\n    };\n\n    const messageRef = firebase.database().ref('messages');\n    const sendMessage = async () => {\n        if(!text) {\n            setErrors(prev => prev.concat(\"Type contents first\"));\n            return;\n        } else {\n            setLoading(true);\n            try {\n                await messageRef.child(chatRoom.id).push().set(createMessage());\n                setLoading(false);\n                setText('');\n                setErrors([]);\n            } catch(error) {\n                setErrors(prev => prev.concat(error.message));\n                setLoading(false);\n                setTimeout(() => {\n                    setErrors([]);\n                },5000);\n            }\n            \n        }\n    };\n\n    const onSelectImageRef = () => {\n        imageRef.current.click();\n    };\n\n    const getPath = () => {\n        if(isPrivateRoom) {\n            return `/message/private/${chatRoom.id}`;\n        } else {\n            return `/message/public`;\n        }\n    };\n\n    const onUploadImage = (e) => {\n        const file = e.target.files[0];\n        const filePath = `${getPath()}/${file.name}`;\n        const metadata = { contentType: mime.lookup(file.name)};\n        setLoading(true);\n\n        try {\n            let uploadTask = storageRef.child(filePath).put(file, metadata);\n            uploadTask.on(\"state_changed\", \n            UploadTaskSnapshot => {\n                const percentage = Math.round(\n                    (UploadTaskSnapshot.bytesTransferred / UploadTaskSnapshot.totalBytes) * 100\n                );\n                setPercentage(percentage);\n                console.log(percentage);\n\n            },\n            err => { \n                console.error(err);\n                setLoading(false);\n            },\n            () => {\n                uploadTask.snapshot.ref.getDownloadURL()\n                .then(downloadURL => {\n                    messageRef.child(chatRoom.id).push().set(createMessage(downloadURL));\n                    setLoading(false)\n                });\n            }\n            )\n        } catch(error) {\n            alert(error);\n        }\n\n    };\n\n\n    return (\n        <>\n            <Form style={{width: '100%'}} onSubmit={sendMessage}>\n                <Form.Group controlId=\"exampleForm.ControlTextarea1\">\n                <Form.Control as=\"textarea\" rows={3} value={text} onChange={onChange}/>\n                 </Form.Group>\n            </Form>\n            {\n                !(percentage === 0 || percentage === 100) &&\n                <ProgressBar now={percentage} label={`${percentage}%`} />\n            }\n           \n\n            <div> { errors.map(msg => <p key={msg}>{msg}</p>) }</div>\n            <Row>\n                <Col style={{display:'flex', justifyContent:'center', padding: 0}}>\n                    <button className=\"formBtn send\" onClick={sendMessage}>SEND</button>\n                </Col>\n                <Col style={{display:'flex', justifyContent:'center', padding: 0}}>\n                    <button \n                    className=\"formBtn upload\"\n                    onClick={onSelectImageRef}\n                    \n                    >UPLOAD</button>\n                </Col>\n            </Row>\n            <input \n            style={{display: 'none'}}\n            ref={imageRef}\n            onChange={onUploadImage}\n            type=\"file\"/>\n        </>\n    );\n};\n\nexport default MessageForm;\n\n\n","/Users/kimyujin/Documents/react_first/react-chat-app/src/firebase.js",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/MainPanel/messageHeader.jsx",["110","111"],"/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/reducers/chatRoom_reducer.js",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/MainPanel/message.jsx",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/actions/chatRoom_action.js",[],{"ruleId":"112","replacedBy":"113"},{"ruleId":"114","replacedBy":"115"},{"ruleId":"112","replacedBy":"116"},{"ruleId":"114","replacedBy":"117"},{"ruleId":"112","replacedBy":"118"},{"ruleId":"114","replacedBy":"119"},{"ruleId":"112","replacedBy":"120"},{"ruleId":"114","replacedBy":"121"},{"ruleId":"112","replacedBy":"122"},{"ruleId":"114","replacedBy":"123"},{"ruleId":"112","replacedBy":"124"},{"ruleId":"114","replacedBy":"125"},{"ruleId":"126","severity":1,"message":"127","line":15,"column":12,"nodeType":"128","messageId":"129","endLine":15,"endColumn":19},{"ruleId":"126","severity":1,"message":"130","line":9,"column":8,"nodeType":"128","messageId":"129","endLine":9,"endColumn":13},{"ruleId":"131","severity":1,"message":"132","line":30,"column":8,"nodeType":"133","endLine":30,"endColumn":10,"suggestions":"134"},"no-native-reassign",["135"],"no-negated-in-lhs",["136"],["135"],["136"],["135"],["136"],["135"],["136"],["135"],["136"],["135"],["136"],"no-unused-vars","'loading' is assigned a value but never used.","Identifier","unusedVar","'Image' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'addFavoriteListener', 'chatRoom', and 'user'. Either include them or remove the dependency array.","ArrayExpression",["137"],"no-global-assign","no-unsafe-negation",{"desc":"138","fix":"139"},"Update the dependencies array to be: [addFavoriteListener, chatRoom, user]",{"range":"140","text":"141"},[1262,1264],"[addFavoriteListener, chatRoom, user]"]