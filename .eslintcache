[{"/Users/kimyujin/Documents/react_first/react-chat-app/src/reportWebVitals.js":"1","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/RegisterPage/registerPage.jsx":"2","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/chatPage.jsx":"3","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/LoginPage/loginPage.jsx":"4","/Users/kimyujin/Documents/react_first/react-chat-app/src/index.js":"5","/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/reducers/index.js":"6","/Users/kimyujin/Documents/react_first/react-chat-app/src/App.js":"7","/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/actions/type.js":"8","/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/reducers/user_reducer.js":"9","/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/actions/user_action.js":"10","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/sidePanel.jsx":"11","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/MainPanel/mainPanel.jsx":"12","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/chatRooms.jsx":"13","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/directMessage.jsx":"14","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/favorited.jsx":"15","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/userPanel.jsx":"16","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/MainPanel/messageForm.jsx":"17","/Users/kimyujin/Documents/react_first/react-chat-app/src/firebase.js":"18","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/MainPanel/messageHeader.jsx":"19","/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/reducers/chatRoom_reducer.js":"20","/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/MainPanel/message.jsx":"21","/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/actions/chatRoom_action.js":"22"},{"size":362,"mtime":1606797394999,"results":"23","hashOfConfig":"24"},{"size":3186,"mtime":1606893631816,"results":"25","hashOfConfig":"24"},{"size":687,"mtime":1607239272792,"results":"26","hashOfConfig":"24"},{"size":1806,"mtime":1606894829706,"results":"27","hashOfConfig":"24"},{"size":1172,"mtime":1606822291438,"results":"28","hashOfConfig":"24"},{"size":211,"mtime":1606986760347,"results":"29","hashOfConfig":"24"},{"size":1187,"mtime":1607058758170,"results":"30","hashOfConfig":"24"},{"size":242,"mtime":1607422407480,"results":"31","hashOfConfig":"24"},{"size":666,"mtime":1607058758214,"results":"32","hashOfConfig":"24"},{"size":337,"mtime":1606900008060,"results":"33","hashOfConfig":"24"},{"size":518,"mtime":1606831684169,"results":"34","hashOfConfig":"24"},{"size":2743,"mtime":1607482856868,"results":"35","hashOfConfig":"24"},{"size":5202,"mtime":1607422884161,"results":"36","hashOfConfig":"24"},{"size":2903,"mtime":1607489532120,"results":"37","hashOfConfig":"24"},{"size":245,"mtime":1606831627498,"results":"38","hashOfConfig":"24"},{"size":2724,"mtime":1606916178189,"results":"39","hashOfConfig":"24"},{"size":4806,"mtime":1607488954174,"results":"40","hashOfConfig":"24"},{"size":753,"mtime":1606807971366,"results":"41","hashOfConfig":"24"},{"size":2571,"mtime":1607489499986,"results":"42","hashOfConfig":"24"},{"size":494,"mtime":1607422401445,"results":"43","hashOfConfig":"24"},{"size":1134,"mtime":1607309097413,"results":"44","hashOfConfig":"24"},{"size":305,"mtime":1607422725394,"results":"45","hashOfConfig":"24"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},"jinhow",{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"51"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"51"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"51"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"51"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"51"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"51"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"84","usedDeprecatedRules":"51"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"93"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/kimyujin/Documents/react_first/react-chat-app/src/reportWebVitals.js",[],["96","97"],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/RegisterPage/registerPage.jsx",[],["98","99"],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/chatPage.jsx",[],["100","101"],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/LoginPage/loginPage.jsx",[],["102","103"],"/Users/kimyujin/Documents/react_first/react-chat-app/src/index.js",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/reducers/index.js",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/App.js",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/actions/type.js",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/reducers/user_reducer.js",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/actions/user_action.js",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/sidePanel.jsx",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/MainPanel/mainPanel.jsx",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/chatRooms.jsx",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/directMessage.jsx",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/favorited.jsx",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/SidePanel/userPanel.jsx",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/MainPanel/messageForm.jsx",["104"],"import React, { useRef } from 'react';\nimport Form from 'react-bootstrap/Form';\nimport ProgressBar from 'react-bootstrap/ProgressBar';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport './mainStyles.css';\nimport { useState } from 'react';\nimport firebase from '../../../firebase';\nimport {useSelector} from 'react-redux';\nimport mime from 'mime-types';\n\nconst MessageForm = () => {\n    const [text, setText] = useState('');\n    const [errors, setErrors] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [percentage, setPercentage] = useState(0);\n\n    const chatRoom = useSelector(state => state.chatRoom.currentChatRoom);\n    const user = useSelector(state => state.user.currentUser);\n    const isPrivateRoom = useSelector(state => state.chatRoom.isPrivateRoom);\n    const imageRef = useRef();\n    const storageRef = firebase.storage().ref();\n\n    const onChange = (e) => {\n        setText(e.target.value);\n    };\n\n    const createMessage = (fileUrl = null) =>  {\n        const message = {\n            timestamp: firebase.database.ServerValue.TIMESTAMP,\n            user: {\n                id: user.uid,\n                name: user.displayName,\n                image: user.photoURL\n            }\n        };\n\n        if(fileUrl !== null) {\n            message[\"image\"] = fileUrl;\n        } else {\n            message[\"content\"] = text;\n        }\n        return message;\n    };\n\n    const messageRef = firebase.database().ref('messages');\n    const sendMessage = async () => {\n        if(!text) {\n            setErrors(prev => prev.concat(\"Type contents first\"));\n            return;\n        } else {\n            setLoading(true);\n            try {\n                await messageRef.child(chatRoom.id).push().set(createMessage());\n                setLoading(false);\n                setText('');\n                setErrors([]);\n            } catch(error) {\n                setErrors(prev => prev.concat(error.message));\n                setLoading(false);\n                setTimeout(() => {\n                    setErrors([]);\n                },5000);\n            }\n            \n        }\n    };\n\n    const onSelectImageRef = () => {\n        imageRef.current.click();\n    };\n\n    const getPath = () => {\n        if(isPrivateRoom) {\n            return `/message/private/${chatRoom.id}`;\n        } else {\n            return `/message/public`;\n        }\n    };\n\n    const onUploadImage = (e) => {\n        const file = e.target.files[0];\n        const filePath = `${getPath()}/${file.name}`;\n        const metadata = { contentType: mime.lookup(file.name)};\n        setLoading(true);\n\n        try {\n            let uploadTask = storageRef.child(filePath).put(file, metadata);\n            uploadTask.on(\"state_changed\", \n            UploadTaskSnapshot => {\n                const percentage = Math.round(\n                    (UploadTaskSnapshot.bytesTransferred / UploadTaskSnapshot.totalBytes) * 100\n                );\n                setPercentage(percentage);\n                console.log(percentage);\n\n            },\n            err => { \n                console.error(err);\n                setLoading(false);\n            },\n            () => {\n                uploadTask.snapshot.ref.getDownloadURL()\n                .then(downloadURL => {\n                    messageRef.child(chatRoom.id).push().set(createMessage(downloadURL));\n                    setLoading(false)\n                });\n            }\n            )\n        } catch(error) {\n            alert(error);\n        }\n\n    };\n\n\n    return (\n        <>\n            <Form style={{width: '100%'}} onSubmit={sendMessage}>\n                <Form.Group controlId=\"exampleForm.ControlTextarea1\">\n                <Form.Control as=\"textarea\" rows={3} value={text} onChange={onChange}/>\n                 </Form.Group>\n            </Form>\n            {\n                !(percentage === 0 || percentage === 100) &&\n                <ProgressBar now={percentage} label={`${percentage}%`} />\n            }\n           \n\n            <div> { errors.map(msg => <p key={msg}>{msg}</p>) }</div>\n            <Row>\n                <Col style={{display:'flex', justifyContent:'center', padding: 0}}>\n                    <button className=\"formBtn send\" onClick={sendMessage}>SEND</button>\n                </Col>\n                <Col style={{display:'flex', justifyContent:'center', padding: 0}}>\n                    <button \n                    className=\"formBtn upload\"\n                    onClick={onSelectImageRef}\n                    \n                    >UPLOAD</button>\n                </Col>\n            </Row>\n            <input \n            style={{display: 'none'}}\n            ref={imageRef}\n            onChange={onUploadImage}\n            type=\"file\"/>\n        </>\n    );\n};\n\nexport default MessageForm;\n\n\n","/Users/kimyujin/Documents/react_first/react-chat-app/src/firebase.js",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/MainPanel/messageHeader.jsx",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/reducers/chatRoom_reducer.js",[],"/Users/kimyujin/Documents/react_first/react-chat-app/src/components/ChatPage/MainPanel/message.jsx",[],["105","106"],"/Users/kimyujin/Documents/react_first/react-chat-app/src/redux/actions/chatRoom_action.js",[],{"ruleId":"107","replacedBy":"108"},{"ruleId":"109","replacedBy":"110"},{"ruleId":"107","replacedBy":"111"},{"ruleId":"109","replacedBy":"112"},{"ruleId":"107","replacedBy":"113"},{"ruleId":"109","replacedBy":"114"},{"ruleId":"107","replacedBy":"115"},{"ruleId":"109","replacedBy":"116"},{"ruleId":"117","severity":1,"message":"118","line":15,"column":12,"nodeType":"119","messageId":"120","endLine":15,"endColumn":19},{"ruleId":"107","replacedBy":"121"},{"ruleId":"109","replacedBy":"122"},"no-native-reassign",["123"],"no-negated-in-lhs",["124"],["123"],["124"],["123"],["124"],["123"],["124"],"no-unused-vars","'loading' is assigned a value but never used.","Identifier","unusedVar",["123"],["124"],"no-global-assign","no-unsafe-negation"]